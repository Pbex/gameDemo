{"version":3,"sources":["Bullet.js"],"names":["cc","Class","extends","Component","properties","stopBullet","onHit","anim","getComponent","Animation","gameManager","bulletDecrease","play","wrapMode","WrapMode","Normal","onHitEnd","node","destroy","moveBullet","dt","position","y","maxY","x","maxX","direction","Vec2","speed","switchDir","bulletAdd","angle","onLoad","Loop","repeatCount","Infinity","start","update"],"mappings":"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","file":"Bullet.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        stopBullet: false,\r\n    },\r\n\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onHit() {\r\n        var anim = this.getComponent(cc.Animation);\r\n        this.stopBullet = true;\r\n        this.gameManager.getComponent('GameManager').bulletDecrease();\r\n        anim.play('stone_break').wrapMode = cc.WrapMode.Normal;\r\n    },\r\n    onHitEnd: function () {\r\n        this.node.destroy();\r\n    },\r\n    moveBullet: function (dt) {\r\n        if (this.node.position.y < -this.maxY || this.node.position.x < -this.maxX ||\r\n            this.node.position.y > this.maxY || this.node.position.x > this.maxX) {\r\n            this.gameManager.getComponent('GameManager').bulletDecrease();\r\n            this.node.destroy();\r\n        }\r\n        switch (this.direction) {\r\n            case 0://comes from up\r\n                this.node.position = new cc.Vec2(this.node.position.x,\r\n                    this.node.position.y - this.speed * dt);\r\n                break;\r\n            case 1:\r\n                this.node.position = new cc.Vec2(this.node.position.x - this.speed * dt,\r\n                    this.node.position.y);\r\n                break;\r\n            case 2:\r\n                this.node.position = new cc.Vec2(this.node.position.x,\r\n                    this.node.position.y + this.speed * dt);\r\n                break;\r\n            case 3:\r\n                this.node.position = new cc.Vec2(this.node.position.x + this.speed * dt,\r\n                    this.node.position.y);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n        // console.log('move bullet end');\r\n\r\n    },\r\n\r\n    switchDir() {\r\n        this.gameManager.getComponent('GameManager').bulletAdd();\r\n        switch (this.direction) {\r\n            case 1:\r\n                this.node.angle = 270;\r\n                break;\r\n            case 2:\r\n                this.node.angle = 180;\r\n                break;\r\n            case 3:\r\n                this.node.angle = 90;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n    onLoad() {\r\n        var anim = this.getComponent(cc.Animation);\r\n        anim.play().wrapMode = cc.WrapMode.Loop;\r\n        anim.play().repeatCount = Infinity;\r\n        // console.log(bulletCount);\r\n    },\r\n\r\n    start() {\r\n    },\r\n\r\n    update(dt) {\r\n        if (!this.stopBullet) {\r\n            this.moveBullet(dt);\r\n        }\r\n    },\r\n});\r\n"]}