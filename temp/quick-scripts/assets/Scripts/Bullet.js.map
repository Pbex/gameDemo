{"version":3,"sources":["Bullet.js"],"names":["bulletCount","cc","Class","extends","Component","properties","stopBullet","onHit","anim","getComponent","Animation","play","wrapMode","WrapMode","Normal","onHitEnd","node","destroy","moveBullet","dt","position","y","maxY","x","maxX","direction","Vec2","speed","switchDir","angle","onLoad","Loop","repeatCount","Infinity","start","update"],"mappings":"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","file":"Bullet.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nvar bulletCount=0;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        stopBullet: false,\r\n    },\r\n\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onHit() {\r\n        var anim = this.getComponent(cc.Animation);\r\n        this.stopBullet = true;\r\n        anim.play('stone_break').wrapMode = cc.WrapMode.Normal;\r\n    },\r\n    onHitEnd: function () {\r\n        this.node.destroy();\r\n    },\r\n    moveBullet: function (dt) {\r\n        // console.log(this.speed);\r\n        // console.log('move bullet start');\r\n\r\n        if (this.node.position.y < -this.maxY || this.node.position.x < -this.maxX ||\r\n            this.node.position.y > this.maxY || this.node.position.x > this.maxX) {\r\n            bulletCount--;\r\n                // this.gameManager.getComponent('GameManager').bulletDecrease(bulletCount);\r\n            this.node.destroy();\r\n\r\n        }\r\n        switch (this.direction) {\r\n            case 0://comes from up\r\n\r\n                this.node.position = new cc.Vec2(this.node.position.x,\r\n                    this.node.position.y - this.speed * dt);\r\n                break;\r\n            case 1:\r\n\r\n                this.node.position = new cc.Vec2(this.node.position.x - this.speed * dt,\r\n                    this.node.position.y);\r\n                break;\r\n            case 2:\r\n\r\n                this.node.position = new cc.Vec2(this.node.position.x,\r\n                    this.node.position.y + this.speed * dt);\r\n                break;\r\n            case 3:\r\n\r\n                this.node.position = new cc.Vec2(this.node.position.x + this.speed * dt,\r\n                    this.node.position.y);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n        // console.log('move bullet end');\r\n\r\n    },\r\n\r\n    switchDir() {\r\n        switch (this.direction) {\r\n            case 1:\r\n                this.node.angle = 270;\r\n                break;\r\n            case 2:\r\n                this.node.angle = 180;\r\n                break;\r\n            case 3:\r\n                this.node.angle = 90;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n\r\n\r\n    onLoad() {\r\n\r\n        var anim = this.getComponent(cc.Animation);\r\n        anim.play().wrapMode = cc.WrapMode.Loop;\r\n        anim.play().repeatCount = Infinity;\r\n        bulletCount++;\r\n        // console.log(bulletCount);\r\n        // this.gameManager.getComponent('GameManager').bulletAdd();\r\n        \r\n    },\r\n\r\n    start() {\r\n    },\r\n\r\n    update(dt) {\r\n        if (!this.stopBullet) {\r\n            this.moveBullet(dt);\r\n        }\r\n    },\r\n});\r\n"]}