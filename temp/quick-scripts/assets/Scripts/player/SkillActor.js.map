{"version":3,"sources":["SkillActor.js"],"names":["crashTimer","crashTime","crashing","cc","Class","extends","Component","properties","boss","Node","crashIcon","crash","logic","activateSkill","id","active","getComponent","bulletNum","startShooting","crashStart","stopShooting","console","log","node","parent","speed","group","director","getScheduler","schedule","blink","action","runAction","crashEnd","start","update","dt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIA,aAAW,CAAf;AACA,IAAIC,YAAU,CAAd;AACA,IAAIC,WAAS,KAAb;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,cAAKL,GAAGM,IAhBA;AAiBRC,mBAAUP,GAAGM,IAjBL;AAkBRE,eAAMR,GAAGM,IAlBD;AAmBRG,eAAMT,GAAGM;;AAnBD,KAHP;;AA0BL;AACAI,iBA3BK,yBA2BSC,EA3BT,EA2BY;AACb,gBAAQA,EAAR;AACI,iBAAK,CAAL;AAAO;AACH,qBAAKJ,SAAL,CAAeK,MAAf,GAAsB,IAAtB;AACA;AACJ,iBAAK,CAAL;AAAO;AACH,qBAAKH,KAAL,CAAWI,YAAX,CAAwB,WAAxB,EAAqCC,SAArC;AACA;AACA,iBAAK,CAAL;AACI;AACA;AACR;AACI;AAXR;AAaA,aAAKT,IAAL,CAAUO,MAAV,GAAiB,IAAjB;AACA,aAAKH,KAAL,CAAWI,YAAX,CAAwB,WAAxB,EAAqCE,aAArC;AACH,KA3CI;AA8CLC,cA9CK,wBA8CO;AACRjB,mBAAS,IAAT;AACA,aAAKS,KAAL,CAAWI,MAAX,GAAkB,IAAlB;AACA,aAAKH,KAAL,CAAWI,YAAX,CAAwB,WAAxB,EAAqCI,YAArC;AACAC,gBAAQC,GAAR,CAAY,eAAZ;AACA,aAAKC,IAAL,CAAUC,MAAV,CAAiBR,YAAjB,CAA8B,eAA9B,EAA+CS,KAA/C,IAAsD,CAAtD;AACAJ,gBAAQC,GAAR,CAAY,kBAAZ;AACA,aAAKC,IAAL,CAAUC,MAAV,CAAiBE,KAAjB,GAAuB,SAAvB,CAPQ,CAOyB;AACjC,aAAKH,IAAL,CAAUG,KAAV,GAAgB,OAAhB;AACAvB,WAAGwB,QAAH,CAAYC,YAAZ,GAA2BC,QAA3B,CAAoC,KAAKC,KAAzC,EAAgD,IAAhD,EAAsD,CAAtD,EAAyD,CAAzD,EAA2D,CAA3D,EAA6D,KAA7D;AACH,KAxDI;AAyDLA,SAzDK,mBAyDE;AACH,YAAIC,SAAS5B,GAAG2B,KAAH,CAAS,CAAT,EAAY,EAAZ,CAAb;AACA,aAAKnB,KAAL,CAAWqB,SAAX,CAAqBD,MAArB;AACH,KA5DI;AA6DLE,YA7DK,sBA6DK;AACN,aAAKtB,KAAL,CAAWI,MAAX,GAAkB,KAAlB;AACA,aAAKQ,IAAL,CAAUG,KAAV,GAAgB,SAAhB;AACA,aAAKH,IAAL,CAAUC,MAAV,CAAiBE,KAAjB,GAAuB,QAAvB;AACA,aAAKH,IAAL,CAAUC,MAAV,CAAiBR,YAAjB,CAA8B,eAA9B,EAA+CS,KAA/C,IAAsD,CAAtD;AACA,aAAKb,KAAL,CAAWI,YAAX,CAAwB,WAAxB,EAAqCE,aAArC;AACAhB,mBAAS,KAAT;AACH,KApEI;;;AAuEL;;AAEAgC,SAzEK,mBAyEI,CAER,CA3EI;AA6ELC,UA7EK,kBA6EGC,EA7EH,EA6EO;AACR,YAAIlC,QAAJ,EAAc;AACVF,0BAAYoC,EAAZ;AACA,gBAAIpC,aAAW,EAAf,EAAmB;AACfA,6BAAW,CAAX;AACA,qBAAKiC,QAAL;AACH;AACJ;AACJ;AArFI,CAAT","file":"SkillActor.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\player","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\n\r\nvar crashTimer=0;\r\nvar crashTime=5;\r\nvar crashing=false;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        boss:cc.Node,\r\n        crashIcon:cc.Node,\r\n        crash:cc.Node,\r\n        logic:cc.Node,\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    activateSkill(id){\r\n        switch (id) {\r\n            case 0://crash skill\r\n                this.crashIcon.active=true;\r\n                break;\r\n            case 1://add bullet\r\n                this.logic.getComponent('GameLogic').bulletNum++;\r\n                break;\r\n                case 2:\r\n                    // playerBulletTime*=0.8; \r\n                    break;\r\n            default:\r\n                break;\r\n        }\r\n        this.boss.active=true;\r\n        this.logic.getComponent('GameLogic').startShooting();\r\n    },\r\n    \r\n\r\n    crashStart(){\r\n        crashing=true;\r\n        this.crash.active=true;\r\n        this.logic.getComponent('GameLogic').stopShooting();\r\n        console.log('speed problem');\r\n        this.node.parent.getComponent('PlayerControl').speed*=4;\r\n        console.log('speed no problem');\r\n        this.node.parent.group='default';//player can't be touch while crash\r\n        this.node.group='crash';\r\n        cc.director.getScheduler().schedule(this.blink, this, 3, 1,0,false);\r\n    },\r\n    blink(){\r\n        var action = cc.blink(2, 10);\r\n        this.crash.runAction(action);\r\n    },\r\n    crashEnd(){\r\n        this.crash.active=false;\r\n        this.node.group='default';\r\n        this.node.parent.group='player';\r\n        this.node.parent.getComponent('PlayerControl').speed/=4;\r\n        this.logic.getComponent('GameLogic').startShooting();\r\n        crashing=false;\r\n    },\r\n\r\n    \r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        if (crashing) {\r\n            crashTimer+=dt;\r\n            if (crashTimer>10) {\r\n                crashTimer=0;\r\n                this.crashEnd();\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}